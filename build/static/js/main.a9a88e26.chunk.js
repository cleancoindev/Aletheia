(this.webpackJsonpaletheia=this.webpackJsonpaletheia||[]).push([[0],{12:function(e,t,n){e.exports=n(20)},17:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(5),l=n.n(o),c=(n(17),n(3)),i=n.n(c),s=n(6),u=n(7),m=n(8),d=n(10),p=n(9),h=n(11),f=n(1);var b=function(e){var t=e.db,n=Object(a.useState)("none"),o=Object(f.a)(n,2),l=o[0],c=o[1],i=Object(a.useState)([]),s=Object(f.a)(i,2),u=s[0],m=s[1],d=[],p=[];if(t){var h=!0,b=!1,v=void 0;try{for(var y,E=t[Symbol.iterator]();!(h=(y=E.next()).done);h=!0){var g=y.value;d.includes(g.poem)||d.push(g.poem),g.poem==l&&p.push(g)}}catch(N){b=!0,v=N}finally{try{h||null==E.return||E.return()}finally{if(b)throw v}}}for(var w=[],_=0;_<p.length;_++)for(var x=_+1;x<p.length;x++){var k=p[_],j=p[x];w.push(r.a.createElement("option",{key:k.name+j.name,value:k.name+"-vs-"+j.name},k.translator," vs ",j.translator))}return r.a.createElement("div",{id:"wrapper",className:"divided"},r.a.createElement("section",{className:"banner style1 orient-left content-align-left image-position-right fullscreen onload-image-fade-in onload-content-fade-right"},r.a.createElement("div",{className:"content"},r.a.createElement("h1",null,"Aletheia"),r.a.createElement("p",{className:"major"},"A high level translation comparison tool."),!t&&r.a.createElement("p",{className:"major"},r.a.createElement("i",null,"Loading Archive...")),t&&r.a.createElement("div",{className:"fields"},r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"poem"},"Poem"),r.a.createElement("select",{name:"poem",id:"poem",onChange:function(e){return c(e.target.value)}},r.a.createElement("option",{value:""},"- Poem -"),d.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("br",null),r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"versions"},"Versions"),r.a.createElement("select",{name:"versions",id:"versions",onChange:function(e){m(e.target.value)}},r.a.createElement("option",{value:""},"- A vs. B -"),w))),r.a.createElement("br",null),t&&r.a.createElement("ul",{className:"actions stacked"},r.a.createElement("li",null,r.a.createElement("a",{href:"/?".concat(u),className:"button big wide smooth-scroll-middle"},"Analyze")))),r.a.createElement("div",{className:"image"},r.a.createElement("img",{src:"images/banner.jpg",alt:""}))))},v=n(2),y=new Set(["the","and","of","to","with","her","in","a","his","i","she","my","from","on","you","that","he","your","for","is","-","as","by","not","all","me","this","have","or","was","it","their","will","him","now","at","be","when","do","what","while","but","has","shall","were","are","through","","there","one","out","these","so","had","nor","down","such","into","our","away","if","who","they","up","first","own","thus","spoke","whom","them","its","once","over","then","went","upon","said","may","we","which"]),E={sad:"\ud83d\ude22",upset:"\ud83d\ude29",angry:"\ud83d\ude20",scared:"\ud83d\ude28",hurt:"\ud83e\udd15",disappointed:"\ud83d\ude1e",pained:"\ud83d\ude27",happy:"\ud83d\ude04",excited:"\ud83e\udd29",satisfied:"\ud83d\ude0a",disgusted:"\ud83d\ude12",dead:"\ud83d\udc80",none:"","@@UNKNOWN@@":""};function g(e){return"hsl(".concat(55+e,", 75%, 75%)")}function w(e){var t=e.doc,n=e.otherDoc,a=e.showHeader,o=t.sections.map((function(e){return e.gcp.sent_score*e.gcp.sent_mag})).reduce((function(e,t){return e+t}),0)/t.sections.length,l=function(e){var t=e.corenlp.quotes,n=e.sections,a={},r=!0,o=!1,l=void 0;try{for(var c,i=function(){var e=c.value,t=n.find((function(t){return t.text.includes(e.text)}));if(!t)return"continue";var r=t.gcp.sentences.findIndex((function(t){return t.text.includes(e.text.substring(0,10))})),o=t.gcp.sentences.findIndex((function(t){return t.text.includes(e.text.substring(e.text.length-10))}));if(-1==r||-1==o)return"continue";for(var l=0,i=r;i<=o;i++)l+=t.gcp.sentences[i].sent_score*t.gcp.sentences[i].sent_mag;e.sent=l/(o-r+1),e.speaker in a||(a[e.speaker]=[]),e.canonicalSpeaker in a||(a[e.canonicalSpeaker]=[]),a[e.speaker].push(e),a[e.canonicalSpeaker].push(e)},s=t[Symbol.iterator]();!(r=(c=s.next()).done);r=!0)i()}catch(p){o=!0,l=p}finally{try{r||null==s.return||s.return()}finally{if(o)throw l}}var u=[],m=function(e){var t={name:e,quotes:a[e]};t.sent=t.quotes.map((function(e){return e.sent})).reduce((function(e,n){return e+n*(1/t.quotes.length)}),0),u.push(t)};for(var d in a)m(d);return u.sort((function(e,t){return e.sent-t.sent})),u}(t),c=function(e){var t=e.sections.map((function(e){return e.text})).flat().join(" ").replace(/[\.!"'?,]/g,"").split(" "),n={};t.forEach((function(e){return n[e]=(n[e]||0)+1}));var a=Object.keys(n);a.sort((function(e,t){return n[t]-n[e]}));for(var r=[],o=0;r.length<10&&o<a.length;o++){var l=a[o];y.has(l.toLowerCase())||r.push({word:l,count:n[l]})}return r}(t),i=[{name:"Words",val:t.word_cnt,otherVal:n.word_cnt},{name:"Readability",val:t.readability.readabilitygrades.FleschReadingEase.toFixed(2),otherVal:n.readability.readabilitygrades.FleschReadingEase.toFixed(2)},{name:"Words/Sentence",val:t.readability.sentenceinfo.words_per_sentence.toFixed(2),otherVal:n.readability.sentenceinfo.words_per_sentence.toFixed(2)},{name:"Syllables/Word",val:t.readability.sentenceinfo.syll_per_word.toFixed(2),otherVal:n.readability.sentenceinfo.syll_per_word.toFixed(2)},{name:"Letters/Word",val:t.readability.sentenceinfo.characters_per_word.toFixed(2),otherVal:n.readability.sentenceinfo.characters_per_word.toFixed(2)},{name:"Complex Words",val:t.readability.sentenceinfo.complex_words,otherVal:n.readability.sentenceinfo.complex_words},{name:"Type-Token Ratio",val:t.readability.sentenceinfo.type_token_ratio.toFixed(3),otherVal:n.readability.sentenceinfo.type_token_ratio.toFixed(3)}];return console.log(t),r.a.createElement("section",{className:"banner style1",style:{width:"45%"}},r.a.createElement("div",{className:"content",style:{paddingLeft:"0"}},a?r.a.createElement("h1",null,t.poem," / ",t.book):r.a.createElement("h1",null,"\xa0"),r.a.createElement("h1",{style:{fontSize:"2em"}},t.translator),r.a.createElement("span",{className:"major"},"Total Sentiment: ",r.a.createElement("b",{style:{color:g(100*o)}},o.toFixed(2))),r.a.createElement("br",null),i.map((function(e){return[e.val>e.otherVal?r.a.createElement("span",{className:"major"},e.name,": ",r.a.createElement("b",{style:{fontWeight:"600"}},e.val)):r.a.createElement("span",{className:"major"},e.name,": ",r.a.createElement("b",null,e.val)),r.a.createElement("br",null)]})),r.a.createElement("br",null),r.a.createElement("span",null,"Sentiment by Quote Speaker:"),r.a.createElement("br",null),l.map((function(e){return r.a.createElement(k,{speaker:e})})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("span",null,"Unique Words:"),r.a.createElement("br",null),c.map((function(e){return r.a.createElement(j,{word:e,words:c})}))))}function _(e){var t=e.idx,n=e.docs,a=e.key,o=Object(f.a)(n,2),l=o[0],c=o[1],i=[l.sections[t],c.sections[t]],s=i[0],u=i[1];return[r.a.createElement(x,{key:"a"+a,sec:s,doc:l}),r.a.createElement(x,{key:"b"+a,sec:u,doc:c})]}function x(e){var t=e.sec,n=e.key,a=(e.doc,t.gcp.sent_score*t.gcp.sent_mag*60),o=t.text,l=t.allennlp.event_to_mind.oreact_top_k_predicted_tokens,c=t.allennlp.event_to_mind.oreact_top_k_log_probabilities,i=[];if("none"!=l[0][0])for(var s in l)c[s]>-3&&i.push(E[l[s][0]]);for(var u=0,m=[t.allennlp.qa_what.best_span_str,t.allennlp.qa_why.best_span_str];u<m.length;u++){var d=m[u];try{var p=new RegExp("\\b".concat(d,"\\b"));o=o.replace(p,"<b>".concat(d,"</b>"))}catch(q){}}var h=!0,f=!1,b=void 0;try{for(var v,y=t.gcp.entities[Symbol.iterator]();!(h=(v=y.next()).done);h=!0){var w=v.value;if(!(w.salience<.01)){var _=w.sent_score*w.sent_mag,x=new RegExp("\\b".concat(w.name,"\\b"));o=Math.abs(_)>.5?o.replace(x,'<b style="color: '.concat(g(60*_),'">').concat(w.name,"</b>")):o.replace(x,"<b>".concat(w.name,"</b>"))}}}catch(W){f=!0,b=W}finally{try{h||null==y.return||y.return()}finally{if(f)throw b}}var k=!0,j=!1,N=void 0;try{for(var S,O=t.textrazor[Symbol.iterator]();!(k=(S=O.next()).done);k=!0){var F=S.value,C=new RegExp("\\b".concat(F.text,"\\b"));o=o.replace(C,"<b>".concat(F.text,"</b>"))}}catch(W){j=!0,N=W}finally{try{k||null==O.return||O.return()}finally{if(j)throw N}}return r.a.createElement("section",{key:n,className:"style1",style:{width:"45%"}},r.a.createElement("div",{className:"content"},r.a.createElement("blockquote",{style:{borderLeftColor:g(a),marginBottom:"0"},dangerouslySetInnerHTML:{__html:o}}),r.a.createElement("span",null,i.join(" "))),r.a.createElement("br",null))}function k(e){var t=e.speaker,n=Object(a.useState)(!1),o=Object(f.a)(n,2),l=o[0],c=o[1];return r.a.createElement("div",{style:{display:"inline-block",padding:"1.5px"}},r.a.createElement("i",{className:"button small",style:{backgroundColor:g(160*t.sent)},onClick:function(){return c(!l)}},t.name," (",t.quotes.length,")"),l&&t.quotes.map((function(e,t){return r.a.createElement("blockquote",{key:t,style:{borderLeftColor:g(60*e.sent)}},e.text)})))}function j(e){var t=e.word,n=e.words,a=Math.min.apply(Math,Object(v.a)(n.map((function(e){return e.count})))),o=Math.max.apply(Math,Object(v.a)(n.map((function(e){return e.count}))));return r.a.createElement("div",{style:{display:"inline-block",padding:"1.5px"}},r.a.createElement("i",{className:"button small",style:{backgroundColor:"hsla(180, 75%, 75%, ".concat((t.count-a)/o,")")}},t.word," (",t.count,")"))}var N=function(e){var t=e.selected,n=Math.min(t[0].section_cnt,t[1].section_cnt);return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"baseline"}},r.a.createElement(w,{doc:t[0],otherDoc:t[1],showHeader:!0}),r.a.createElement(w,{doc:t[1],otherDoc:t[0]})),Object(v.a)(Array(n).keys()).map((function(e){return r.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",textAlign:"left"}},r.a.createElement(_,{key:e,docs:t,idx:e}))})))},S=(n(19),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={db:null},n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(s.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/db.json").then((function(e){return e.json()}));case 2:n=t.sent,e.setState({db:n});case 4:case"end":return t.stop()}}),t)})))()}},{key:"render",value:function(){var e=this.state.db,t=window.location.search,n=null;if(t&&e){var a=t.substring(1).split("-vs-");n=[e.find((function(e){return e.name==a[0]})),e.find((function(e){return e.name==a[1]}))]}return r.a.createElement("div",{className:"App"},!t&&!n&&r.a.createElement(b,{db:e}),n&&r.a.createElement(N,{selected:n}))}}]),t}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[12,1,2]]]);
//# sourceMappingURL=main.a9a88e26.chunk.js.map